# AI HUB QA Assistant

## Описание

Чат-бот для Telegram, который помогает абитуриенту разобраться, какая из двух магистерских программ ИТМО ему подходит, и спланировать учёбу на основе учебных планов:

- **Искусственный интеллект** — https://abit.itmo.ru/program/master/ai  
- **Управление ИИ-продуктами** — https://abit.itmo.ru/program/master/ai_product  

Бот работает в диалоговом режиме и:
- Отвечает на вопросы по содержанию учебных планов.
- Дает рекомендации по выборным дисциплинам с учетом бэкграунда пользователя.
- Работает только с двумя указанными программами.
- Использует **RAG** (retrieval-augmented generation) на базе Qdrant и эмбеддингов **Qwen3-Embedding-0.6B**.
- Генерация ответов — на **Qwen3-1.7B**.

---

## Архитектура

### Сервисы
- **qdrant** — векторная база для хранения и поиска чанков (дисциплин).
- **ingestor** — автоматическое скачивание PDF учебных планов, парсинг по дисциплинам, создание эмбеддингов и загрузка в Qdrant.
- **api** — FastAPI сервис с RAG-пайплайном и LLM для генерации ответов.
- **bot** — Telegram-бот (aiogram), который общается с пользователем и отправляет запросы в API.

### Технологии
- Python 3.11
- [Qwen/Qwen3-Embedding-0.6B](https://huggingface.co/Qwen/Qwen3-Embedding-0.6B) — для векторизации дисциплин.
- [Qwen/Qwen3-1.7B](https://huggingface.co/Qwen/Qwen3-1.7B) — для генерации ответов.
- [Qdrant](https://qdrant.tech/) — векторное хранилище.
- [Playwright](https://playwright.dev/python/) — для автоматического скачивания PDF с сайтов.
- [pdfplumber](https://github.com/jsvine/pdfplumber) — для извлечения текста из PDF.
- Docker Compose — для развёртывания всех компонентов.

---

## Запуск

### 1. Клонировать репозиторий и подготовить окружение
```bash
git clone <repo_url>
cd itmo-mai-chatbot
cp .env.example .env
````

В файле `.env` укажите токен своего Telegram-бота (`TELEGRAM_TOKEN`).

### 2. Запустить проект

```bash
docker compose up --build
```

При первом запуске:

* **ingestor** с помощью Playwright скачает учебные планы в PDF с сайтов программ.
* PDF будут распарсены по дисциплинам и загружены в Qdrant с эмбеддингами.

---

## Использование

В Telegram:

* `/ai <вопрос>` — спросить по программе **Искусственный интеллект**.
* `/aip <вопрос>` — спросить по программе **Управление ИИ-продуктами**.
* `/rec_ai <бэкграунд>` — подбор элективов (ИИ).
* `/rec_aip <бэкграунд>` — подбор элективов (AI Product).
* `/help` — справка.

---

## Пример

**Вопрос**:

```
/ai Какие есть курсы по LLM и в каком семестре?
```

**Ответ**:

```
- Введение в большие языковые модели (семестр 1, 3 з.е.)
- Интеллектуальные агенты и большие языковые модели (семестр 2, 6 з.е.)
- Воркшоп по прикладному использованию языковых и генеративных моделей (семестр 2, 6 з.е.)
...
```

---

## Ограничения

* Бот отвечает **только** по двум указанным магистратурам.
* Если информации нет в учебных планах, бот предложит обратиться к менеджеру программы.
* Требуется GPU для комфортной работы Qwen3-1.7B (CPU тоже возможен, но медленно).

---